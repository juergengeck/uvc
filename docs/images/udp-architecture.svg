<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="600" viewBox="0 0 800 600">
  <style>
    .box {
      fill: #f0f5ff;
      stroke: #3474eb;
      stroke-width: 2;
      rx: 10;
      ry: 10;
    }
    .component {
      fill: #d4e6ff;
      stroke: #0047b3;
      stroke-width: 1.5;
      rx: 6;
      ry: 6;
    }
    .js-box {
      fill: #fffdf0;
      stroke: #deb887;
      stroke-width: 2;
      rx: 10;
      ry: 10;
    }
    .js-component {
      fill: #fff8e1;
      stroke: #d4a76a;
      stroke-width: 1.5;
      rx: 6;
      ry: 6;
    }
    .arrow {
      stroke: #666;
      stroke-width: 1.5;
      marker-end: url(#arrowhead);
    }
    .label {
      font-family: Arial, sans-serif;
      font-size: 14px;
      fill: #333;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    .title {
      font-family: Arial, sans-serif;
      font-size: 16px;
      font-weight: bold;
      fill: #333;
      text-anchor: middle;
      dominant-baseline: middle;
    }
    .smalltext {
      font-family: Arial, sans-serif;
      font-size: 12px;
      fill: #444;
      text-anchor: middle;
      dominant-baseline: middle;
    }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="35" class="title" style="font-size: 24px;">UDP Networking Architecture</text>

  <!-- JavaScript Layer -->
  <rect x="100" y="80" width="600" height="140" class="js-box" />
  <text x="400" y="100" class="title">JavaScript Layer</text>

  <rect x="150" y="120" width="220" height="80" class="js-component" />
  <text x="260" y="145" class="label">React Native Application</text>
  <text x="260" y="170" class="smalltext">DeviceEventEmitter, Promises, etc.</text>

  <rect x="430" y="120" width="220" height="80" class="js-component" />
  <text x="540" y="145" class="label">JSI Interface</text>
  <text x="540" y="170" class="smalltext">Direct Memory Access, ArrayBuffers</text>

  <!-- Bridge Layer -->
  <rect x="100" y="240" width="600" height="80" style="fill: #e6e6e6; stroke: #999; stroke-width: 2; rx: 10; ry: 10;" />
  <text x="400" y="280" class="title">React Native Bridge</text>

  <!-- Native Module Layer -->
  <rect x="100" y="340" width="600" height="240" class="box" />
  <text x="400" y="360" class="title">Native (iOS) Layer</text>

  <!-- UDPModule -->
  <rect x="120" y="380" width="250" height="180" class="component" />
  <text x="245" y="400" class="label">UDPModule</text>
  
  <rect x="130" y="420" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="185" y="435" class="smalltext">UDPModule.mm</text>
  
  <rect x="250" y="420" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="305" y="435" class="smalltext">RCTEventEmitter</text>
  
  <rect x="130" y="460" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="185" y="475" class="smalltext">UDPSocketManager</text>
  
  <rect x="250" y="460" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="305" y="475" class="smalltext">Socket Operations</text>
  
  <rect x="130" y="500" width="230" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="245" y="515" class="smalltext">UDPModuleConstants.h/UDPCXXCompat.h</text>

  <!-- UDPDirectModule -->
  <rect x="430" y="380" width="250" height="180" class="component" />
  <text x="555" y="400" class="label">UDPDirectModule</text>
  
  <rect x="440" y="420" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="495" y="435" class="smalltext">UDPDirectModule.mm</text>
  
  <rect x="560" y="420" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="615" y="435" class="smalltext">JSI Bindings</text>
  
  <rect x="440" y="460" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="495" y="475" class="smalltext">SharedBufferHostObject</text>
  
  <rect x="560" y="460" width="110" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="615" y="475" class="smalltext">Buffer Management</text>
  
  <rect x="440" y="500" width="230" height="30" rx="4" ry="4" style="fill: white; stroke: #0047b3;" />
  <text x="555" y="515" class="smalltext">C++ Memory Management & Socket Access</text>

  <!-- Arrows and connections -->
  <!-- Bridge Connections -->
  <line x1="260" y1="200" x2="260" y2="240" class="arrow" />
  <text x="280" y="220" class="smalltext" style="text-anchor: start;">Bridge API</text>
  
  <!-- Direct JSI Connection -->
  <line x1="540" y1="200" x2="540" y2="380" class="arrow" style="stroke-dasharray: 5,3;" />
  <text x="560" y="290" class="smalltext" style="text-anchor: start;">Direct JSI Access</text>
  
  <line x1="260" y1="320" x2="260" y2="380" class="arrow" />
  
  <!-- Event Flow -->
  <path d="M 200,380 C 200,340 160,320 160,280 L 160,240" class="arrow" style="fill: none;" />
  <text x="130" y="320" class="smalltext" style="text-anchor: start;">Events</text>
  
  <path d="M 500,380 C 500,340 460,320 460,200" class="arrow" style="fill: none; stroke-dasharray: 5,3;" />
  <text x="470" y="290" class="smalltext" style="text-anchor: end;">Events</text>
  
  <!-- System Layer -->
  <rect x="100" y="600" width="600" height="50" style="fill: #d9ead3; stroke: #6aa84f; stroke-width: 2; rx: 10; ry: 10; opacity: 0.8;" transform="translate(0, -70)" />
  <text x="400" y="565" class="title">iOS Networking APIs (Network.framework)</text>
  
  <!-- System Connections -->
  <line x1="245" y1="560" x2="245" y2="530" class="arrow" />
  <line x1="555" y1="560" x2="555" y2="530" class="arrow" />
</svg> 